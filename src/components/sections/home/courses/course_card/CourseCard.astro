---
import AwsIcon from '@assets/common/techIcons/aws.svg';
import JavascriptIcon from '@assets/common/techIcons/javascript.svg';
import NodejsIcon from '@assets/common/techIcons/nodejs.svg';
import ReactIcon from '@assets/common/techIcons/react.svg';
import TypescriptIcon from '@assets/common/techIcons/typescript.svg';
import LiveIndicatorPulse from '@components/LiveIndicatorPulse.astro';
import { Image } from 'astro:assets';
import type { BootcampCourse } from 'src/types/Course';

interface Props {
  course: BootcampCourse;
  withBlur?: boolean;
  isHeader?: boolean;
}

const { course, isHeader = false, withBlur = true } = Astro.props;
---

<article class='h-full text-xxs'>
  <a
    href={course.courseLink}
    role='button'
    class='flex h-full cursor-pointer flex-col items-center self-stretch rounded-2xl border border-gray-200 bg-white px-3 pb-6 pt-3 transition ease-in-out hover:laptop:-translate-y-4 hover:laptop:bg-gray-700/10 focus:laptop:-translate-y-4 focus:laptop:bg-gray-700/10'
  >
    <div
      class:list={[
        'relative mb-3 flex h-[268px] w-full rounded-xl bg-cover bg-center bg-no-repeat tablet:rounded-l',
        { '!h-[198px]': isHeader },
      ]}
      style={{ backgroundImage: `url(${course.imagePath})` }}
    >
      {
        withBlur && (
          <>
            <div class='absolute inset-0 flex h-auto w-full rounded-l bg-black/20 backdrop-blur-[4px]' />
          </>
        )
      }
      <div
        class='absolute top-5 flex w-full items-center justify-between gap-x-2 px-5 tablet:top-3 tablet:px-3'
      >
        <div class='flex flex-wrap justify-between'>
          <div
            class:list={[
              'flex w-fit items-center gap-x-3 rounded-xs border border-gray-400 bg-gray-100 px-2 py-1 backdrop-blur-[2px]',
              { 'laptop:!py-0 desktop:!py-1': isHeader },
            ]}
          >
            <div class='w-fit'>
              <LiveIndicatorPulse />
            </div>
            <p class='text-xxs leading-tight text-white laptop:text-xxs'>
              Live Lectures
            </p>
          </div>
        </div>
        <div class='flex w-fit'>
          {
            [
              ReactIcon,
              JavascriptIcon,
              TypescriptIcon,
              NodejsIcon,
              AwsIcon,
            ].map((icon, index) => (
              <div
                class:list={[
                  index !== 0 && !isHeader && 'ml-[-0.5rem]',
                  isHeader && 'ml-[-0.8rem]',
                ]}
              >
                <Image src={icon} alt='live-lecture-tools-image' class='w-7' />
              </div>
            ))
          }
        </div>
      </div>
      <h2
        class:list={[
          'absolute bottom-0 left-0 right-0 top-0 m-auto h-fit w-fit px-5 text-center text-base font-bold text-cultured tablet:px-3',
          { '!text-base': isHeader },
        ]}
      >
        {course.title}
      </h2>
    </div>
    <h1
      class:list={[
        'w-full text-left text-base font-bold text-primary',
        {
          '!text-s': isHeader,
        },
      ]}
    >
      {course.courseTitle}
    </h1>
    <p
      class:list={[
        'w-full text-left text-s font-medium text-gray-700',
        {
          '!text-xxs': isHeader,
        },
      ]}
    >
      {course.type} &#183; {course.duration} months
    </p>
  </a>
</article>
